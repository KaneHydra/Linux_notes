---
id: "20240315"
aliases: []
tags: []
---

# è£è»Ÿé«”ç¿’æ…£

-   è£ä¸Šä¸€ç‰ˆ(ç©©å®šç‰ˆ,LTSç‰ˆ)ï¼Œæ¯”è¼ƒä¸æœƒæœ‰ bug
-   ä¸Šèª²ä½¿ç”¨ç’°å¢ƒ:
    -   VirtualBox 6
    -   CentOS 8

## Linux ç°¡ä»‹

-   è‡ºç£çš„ç’°å¢ƒé‚„æ˜¯ä»¥ Windows ç‚ºä¸», å¾ˆå¤šè»Ÿé«”éƒ½ä¸æ”¯æ´ Linux, æ‰€ä»¥é€šå¸¸ä¸æœƒä»¥ç”¨æˆ¶è§’åº¦å»å­¸ç¿’

## Linux æ­·å²

æ—©æœŸUnixéƒ½æ˜¯è·Ÿé›»è…¦ä¸€èµ·è³£
éƒ½æœ‰é‡å°ç¡¬é«”å»ä¿®æ”¹
æ²’è¾¦æ³•è‡ªè¡Œå®‰è£

## Kernel æ ¸å¿ƒ

ä½œæ¥­ç³»çµ±æœ€åº•å±¤
è»Ÿç¡¬é«”æ•´åˆ
ä½¿ç”¨è€…è¦åšä»€éº¼ï¼Œéƒ½è¦é€é Kernel
ç•¶åˆ Linux è¢«å¯«å‡ºä¾†ä½œç‚º Kernel ä½¿ç”¨
æ‰€ä»¥ Linux å¯¦éš›ä¸Šæ˜¯ä¸€å€‹ Kernel

å®Œæ•´ä½œæ¥­ç³»çµ±åŒ…å« æ ¸å¿ƒã€ç³»çµ±å·¥å…·ã€æ‡‰ç”¨ç¨‹å¼
ä¸€å€‹ Linux Distrobution åŒ…å«æ ¸å¿ƒã€ç³»çµ±å·¥å…·ã€æ‡‰ç”¨ç¨‹å¼
æ‰€ä»¥ Distrobution åˆç¨±ç‚ºæ•´åˆåŒ…ã€æ•´åˆç™¼è¡Œç‰ˆ

RHEL : Red Hat Enterprise Linux ä¼æ¥­ç‰ˆ
å…è²»ç‰ˆæ˜¯ Fedoraï¼Œä¸€æ¨£ç”± Red Hat çš„å·¥ç¨‹å¸«ç¶­è­·
å…ˆåœ¨å…è²»çš„ Fedora æ¸¬è©¦æ–°åŠŸèƒ½
ç¶“éåŠå¹´ä»¥ä¸Š
ç¢ºå®šåŠŸèƒ½ç©©å®šå¾Œæ‰æ”¾åˆ°ä¼æ¥­çš„ RHEL

CentOS æ˜¯ç¤¾ç¾¤ç”¨ RHEL åŸå§‹ç¢¼ä¿®æ”¹è€Œæˆ

ä¼æ¥­ç‰ˆæ‰æœ‰å°ˆäººå”®å¾Œæœå‹™
ä¿è­‰è»Ÿé«”èˆ‡æœå‹™å¯ç”¨

å¯¦éš›ä¸Š Windows ä¹Ÿæ˜¯é€™æ¨£åš

## å®‰è£æ¦‚å¿µåŠç³»çµ±åŸºæœ¬æ“ä½œ

### Linuxç›®éŒ„çµæ§‹:

åå‘æ¨¹ç‹€çµæ§‹
Linuxä¸Šé¢ä½¿ç”¨ slash `/`
Windows ä¸Šé¢ä½¿ç”¨ back-slash `\`
Windowsçš„è³‡æ–™å¤¾å°±æ˜¯Linuxçš„ç›®éŒ„
ç›®éŒ„é…ç½®ç¬¦åˆ FHS æ¨™æº–è¦ç¯„ (Filesystem Hierarchy Standard)

Linuxçš„ç³»çµ±ç®¡ç†è€…ç¨±ç‚º root

```
/                 æ ¹ç›®éŒ„root

/usr/             å­˜æ”¾ä½¿ç”¨è€…æŒ‡ä»¤
/usr/bin/         binary å­˜æ”¾ä½¿ç”¨è€…æŒ‡ä»¤
/usr/sbin/        super user binary å­˜æ”¾ç³»çµ±ç®¡ç†è€…æŒ‡ä»¤
/usr/lib/         å­˜æ”¾å‡½å¼åº«
/usr/share/       å­˜æ”¾èªªæ˜æ–‡ä»¶
/usr/local/       å­˜æ”¾ç®¡ç†è€…é¡å¤–å®‰è£æ”¯è»Ÿé«”
/usr/include/     å­˜æ”¾å«æ‹¬æª”


/lib/             å­˜æ”¾å‡½å¼åº«

/share/           å­˜æ”¾èªªæ˜æ–‡ä»¶

/var/             å°±æ˜¯ variable, å­˜æ”¾ç¶“å¸¸è®Šå‹•çš„æª”æ¡ˆè³‡æ–™, å¦‚è¨˜éŒ„æª”, è³‡æ–™åº«æª”æ¡ˆç­‰
/var/lib/
/var/spool/
/var/spool/cron/
/var/spool/mail/
/var/log/

/run/             å­˜æ”¾é–‹æ©Ÿå¾Œ process æ‰€åŸ·è¡Œä¹‹æ•¸æ“šè³‡æ–™, å¦‚ pid, lock files

/boot/            å­˜æ”¾é–‹æ©Ÿéç¨‹æ‰€éœ€ä¹‹ç›¸é—œæª”æ¡ˆ

/etc/             å­˜æ”¾ç³»çµ±è¨­å®šæª”
/etc/fstab/
/etc/passwd/

/home/            ä¸€èˆ¬ä½¿ç”¨è€…åŠ ç›®éŒ„ä¹‹é è¨­å®‰ç½®ä½ç½®
/home/ä½¿ç”¨è€…1/
/home/ä½¿ç”¨è€…2/

/root/            ç³»çµ±ç®¡ç†è€… root ä¹‹å€‹äººå®¶ç›®éŒ„

/tmp/             æä¾›ä½¿ç”¨è€…æˆ–ç¨‹å¼åŸ·è¡Œæ™‚æš«å­˜æª”æ¡ˆè³‡æ–™è™•, ä½†æ˜¯ä¸èƒ½åˆªé™¤

/proc/            å°±æ˜¯process, å­ç›®éŒ„ä¸‹ä¹‹è³‡æ–™ä¹ƒå­˜åœ¨æ–¼è¨˜æ†¶é«”ä¹‹ä¸­, å›ºæœ¬èº«ä¸ä½”ç¡¬ç¢Ÿç©ºé–“

/dev/             å°±æ˜¯ device, å­˜æ”¾ç³»çµ±æ‰€éœ€ç¡¬é«”ä¹‹ç›¸é—œè£ç½®æª”æ¡ˆ

æ—©æœŸé€™äº›è³‡æ–™å¤¾ä¸æ˜¯é€£çµ, æ‰€ä»¥æŒ‡ä»¤è¢«æ‹†é–‹æ”¾, ä¸å¤ªæ–¹ä¾¿, ç¾åœ¨æ‰æ”¹æˆé€£çµ
/bin/             ç¬¦è™Ÿé€£çµæª”æ¡ˆ, é€£çµè‡³ /usr/bin
/sbin/            ç¬¦è™Ÿé€£çµæª”æ¡ˆ, é€£çµè‡³ /usr/sbin
/lib/             ç¬¦è™Ÿé€£çµæª”æ¡ˆ, é€£çµè‡³ /usr/lib
/lib64/           ç¬¦è™Ÿé€£çµæª”æ¡ˆ, é€£çµè‡³ /usr/lib64

/mnt/             å°±æ˜¯ mount, é¡å¤–æ›è¼‰ä¹‹å¤–éƒ¨è³‡æ–™å¤¾ç›®éŒ„, é è¨­æ²’æœ‰é€™å€‹ç›®éŒ„, åªæ˜¯è¦è®“æˆ‘å€‘æ–¹ä¾¿æ‰¾åˆ°æ›è¼‰çš„ç›®éŒ„
```

## æª”æ¡ˆç³»çµ±

å¸¸è¦‹æª”æ¡ˆç³»çµ±:
ext2, ext3 ext4, xfs, reiserfs ç­‰
RHEL 8 (CentOS 8) é è¨­ä½¿ç”¨ xfs æª”æ¡ˆç³»çµ±

## è£ç½®æª”æ¡ˆ

Linux è£¡é¢ä¸€åˆ‡çš†æª”æ¡ˆ
æ‰€æœ‰çš„è¨­å‚™éƒ½è¢«è¦–ç‚ºæª”æ¡ˆ
å­˜æ”¾åœ¨ `/dev` ç›®éŒ„
å¸¸è¦‹çš„æœ‰ SCSI, SSD, SATA
é€šå¸¸ä»£è™Ÿç‚º `sd[a-z]`
ç¬¬ä¸€å€‹æŠ“åˆ°å°±æœƒå«åš sda, ç¬¬äºŒå€‹ sdb, ä¾æ­¤é¡æ¨
å¦‚æœå¾Œé¢æœ‰æ•¸å­—, æ¯”å¦‚èªª sda1, sda2, è¡¨ç¤º sda çš„ç¬¬å¹¾å€‹ç£ç¢Ÿåˆ†å‰²å€

## ç£ç¢Ÿåˆ†å‰²

Linux ä¸Šé¢ç¿’æ…£ç”¨ MBR åˆ†å‰², é›–ç„¶çµæ§‹ç°¡å–®å¥½ç”¨ï¼Œä½†æ˜¯æœ€å¤šåªæ”¯æ´2TBçš„ç¡¬ç¢Ÿ
ç¾åœ¨è²·çš„ç­†é›»é€šå¸¸æ˜¯ GPT åˆ†å‰²

MBR åˆ†å‰²å€é¡å‹:

-   ä¸»è¦åˆ†å‰²å€(primary partition): æœ€å¤š4å€‹, ID number ç‚º 1~4
-   å»¶ä¼¸åˆ†å‰²å€(extended partition): æœ€å¤š1å€‹, ä¸èƒ½æ ¼å¼åŒ–, éœ€è¦åœ¨å»¶ä¼¸åˆ†å‰²å€åº•ä¸‹å»ºç«‹é‚è¼¯åˆ†å‰²å€, ID number å¾ 5 é–‹å§‹
-   é‚è¼¯åˆ†å‰²å€(logical partition): åœ¨å»¶ä¼¸åˆ†å‰²å€è£¡é¢å†å»åˆ†å‰²

ä¸»è¦åˆ†å‰²å€ + å»¶ä¼¸åˆ†å‰²å€ ä¸èƒ½è¶…é4å€‹
æ‰€ä»¥æƒ³è¦åˆ‡4å€‹ä»¥ä¸Šçš„ç£ç¢Ÿ, ä¸€å®šè¦æœ‰ä¸€å€‹å»¶ä¼¸åˆ†å‰²å€, è£¡é¢åœ¨å»ç”¨é‚è¼¯åˆ†å‰²

## æ›è¼‰ mount

å¯¦éš›ä¸Šå®‰è£ Linux ä½œæ¥­ç³»çµ±æ™‚
è¦å…ˆåˆ‡å¥½åˆ†å‰²å€
ç„¶å¾ŒæŠŠåˆ†å‰²å€æ›è¼‰åˆ°æŒ‡å®šä½ç½®

è™›æ“¬æ©Ÿè‡³å°‘çµ¦ 15 GB
ä¹‹å¾Œé‚„å¯ä»¥ç·´ç¿’æ–°å¢åˆ†å‰²å€

### åˆ‡æ³•1:

MBR åˆ†å‰²3å€‹ä¸»è¦åˆ†å‰²å€,1å€‹å»¶ä¼¸åˆ†å‰²å€,å»¶ä¼¸åˆ†å‰²å€å†åˆ‡2å€‹é‚è¼¯åˆ†å‰²å€
sda1 åˆ‡ 300M æ›è¼‰åˆ° /usr/ è³‡æ–™å¤¾
sda2 åˆ‡ 7GB æ›è¼‰åˆ° / æ ¹ç›®éŒ„, å…¶ä»–æ²’æœ‰ç¨ç«‹æ›è¼‰çš„è³‡æ–™å¤¾, éƒ½æœƒåœ¨é€™è£¡
sda3 åˆ‡ 500 MB æ›è¼‰åˆ° /home/ è³‡æ–™å¤¾
å‰©ä¸‹ä»–è‡ªå·±æœƒåˆ‡æˆå»¶ä¼¸åˆ†å‰²å€
sda5 åˆ‡ 1 GB æ›è¼‰åˆ° /swap/ è™›æ“¬è¨˜æ†¶é«”è³‡æ–™å¤¾, äº¤æ›å€, ç•¶å¯¦é«”è¨˜æ†¶é«”ä¸è¶³æ™‚æ‰æœƒç”¨åˆ°
å‰©ä¸‹çš„éƒ¨åˆ†å…ˆä¸ç”¨å‹•, ä»–æœƒè‡ªå·±ä¿ç•™, ä¹‹å¾Œæˆ‘å€‘å¯ä»¥ç·´ç¿’æ–°å¢åˆ†å‰²å€

### åˆ‡æ³•2:

å¦‚æœä¸æƒ³åˆ‡é€™éº¼å¤š,
æœ€å°‘åˆ‡ 1 å€‹ä¸»è¦åˆ†å‰², 1 å€‹å»¶ä¼¸åˆ†å‰²,
sda1 è‡³å°‘åˆ‡ 7 GB, çµ¦ / æ ¹ç›®éŒ„
sda2 å°±ç”¨å‰©ä¸‹çš„, çµ¦ /swap/

## ä½¿ç”¨ Virtual Box ç·´ç¿’å®‰è£

### æ–°å¢è™›æ“¬æ©Ÿå™¨

ç‰ˆæœ¬é¸ Other Linux (x64)
é¸ Other Linux æ‰æœƒè‡ªå‹•æ»‘é¼ æ•´åˆ, ä¸ç”¨æŒ‰ Ctrlç”šéº¼çš„å»åˆ‡æ›
å¦‚æœæ²’çœ‹åˆ° x64, è¡¨ç¤ºCPUä¸æ”¯æ´, æˆ–æ˜¯è¦å» BIOS æª¢æŸ¥è™›æ“¬åŒ–æŠ€è¡“æ˜¯å¦é–‹å•Ÿ

RAM: 4GB
è™›æ“¬ç¡¬ç¢Ÿ:
ç«‹å³å»ºç«‹è™›æ“¬ç¡¬ç¢Ÿ
å·²ç¶“å­˜åœ¨è™›æ“¬ç¡¬ç¢Ÿæ‰é¸ä½¿ç”¨ç¾æœ‰è™›æ“¬ç¡¬ç¢Ÿ

ç¡¬ç¢Ÿæª”é¡å‹ é¸ VDI, å° Virtual Box æ”¯æ´æ€§è¼ƒä½³
å¯¦é«”ç©ºé–“: å‹•æ…‹åˆ†é…, æ¯”è¼ƒéˆæ´», ä½”ç”¨æ¯”è¼ƒå°‘ç©ºé–“

æª”æ¡ˆä½ç½®:
`C:\Linux\VM\CentOS.vdi`
æª”æ¡ˆå¤§å°: 15GB

### è¨­å®šè™›æ“¬æ©Ÿå™¨

-   ç³»çµ±
    -   ä¸»æ©Ÿæ¿:
        -   é–‹æ©Ÿé †åº
            -   è»Ÿç¢Ÿå–æ¶ˆæ‰“å‹¾
            -   ç¡¬ç¢Ÿç§»åˆ°æœ€ä¸Šé¢
            -   å…‰ç¢Ÿç¬¬äºŒå€‹
    -   è™•ç†å™¨
        -   CPU æ”¹ 4 æ ¸å¿ƒ
-   å­˜æ”¾è£ç½®
    -   å…‰ç¢Ÿ => é¸æ“‡/å»ºç«‹è™›æ“¬å…‰ç¢Ÿ =>  
        ã€ŒåŠ å…¥ã€ CentOS çš„ iso æª”

### å®‰è£

> æ”¹å®Œä¹‹å¾Œè¨˜å¾—é»å·¦ä¸Šè§’çš„å®ŒæˆæŒ‰éˆ•

1. èªç³»é¸ä¸­æ–‡
2. æ™‚é–“æ—¥æœŸé¸ä¸€ä¸‹æ™‚å€: äºæ´²è‡ºåŒ—, 24å°æ™‚åˆ¶
3. è»Ÿé«”é¸æ“‡(é è¨­å€¼):
    - å«æœ‰ GUI çš„ä¼ºæœå™¨  
      åœ–å½¢åŒ–ä½¿ç”¨è€…ç•Œé¢  
      å³é‚Šéƒ½å…ˆä¸è¦æ‰“å‹¾
4. KDUMP (è¦å–æ¶ˆ)
    - Kernel Dump æ ¸å¿ƒå‚™ä»½
    - ç•¶æ©Ÿæ™‚æ‰æœƒèµ·ä½œç”¨
    - KDump æœƒè¨˜éŒ„ç•¶æ©ŸåŸå› 
    - ä¸éåˆå­¸è€…ä¹Ÿçœ‹ä¸æ‡‚
    - æ‰€ä»¥å…ˆä¸è¦å•Ÿç”¨
5. ç¶²è·¯èˆ‡ä¸»æ©Ÿå
    - ä¹™å¤ªç¶²è·¯æ‰“é–‹
    - ä¸»æ©Ÿåç¨±:  
      hostå­¸è™Ÿ.example.com
6. å®‰è£ç›®çš„åœ°

    - å„²å­˜è£ç½®é¸è‡ªè¨‚, æ‰èƒ½æ‰‹å‹•è™•ç†åˆ†å‰²
    - ä¹‹å¾Œé¸å®Œæˆ, é–‹å§‹æ‰‹å‹•åˆ†å‰²ç£ç¢Ÿå€
    - é»ä¸‹é¢çš„ `+` è™Ÿå»æ–°å¢åˆ†å‰²å€
        - ç¬¬ä¸€å€‹åˆ†å‰²å€:
            - LVM æ”¹æˆ æ¨™æº–åˆ†å‰²å€, ä¹‹å¾Œæ‰å­¸ LVM
            - æª”æ¡ˆç³»çµ±å…ˆé¸ ext4, ä¹‹å¾Œç¤ºç¯„è¦ç”¨åˆ°
            - æ›è¼‰åˆ° `/boot`, å®¹é‡ 300M
        - ç¬¬2å€‹åˆ†å‰²å€
            - sda2 æ›è¼‰åˆ° `/`, å®¹é‡ 7G
        - ç¬¬3å€‹åˆ†å‰²å€
            - sda3 æ›è¼‰åˆ° `/home`, å®¹é‡ 500M
        - ç¬¬4å€‹åˆ†å‰²å€
            - sda4 æ›è¼‰åˆ° /swap, å®¹é‡ 1G

7. ç”¨æˆ¶è¨­å®š
    - æ ¹å¯†ç¢¼ redhat
    - å‰µå»ºç”¨æˆ¶
    - å¤ªç°¡å–®çš„å¯†ç¢¼è¦é»å…©æ¬¡å®Œæˆ, å°±èƒ½å¼·åˆ¶ä½¿ru.sç”¨

### ç™»å…¥

å„˜é‡ä½¿ç”¨ä¸€èˆ¬å¸³è™Ÿç™»å…¥
å¦å‰‡é¢¨éšªå¾ˆé«˜
ç¾åœ¨ç·´ç¿’å…ˆç”¨ç³»çµ±ç®¡ç†å“¡èº«ä»½

æ‰€ä»¥ç™»å…¥æ™‚, ä½¿ç”¨è€…é¸æ²’æœ‰åˆ—åœ¨ä¸Šé¢
ä½¿ç”¨è€…åç¨±: root
ä½¿ç”¨è€…å¯†ç¢¼: redhat

> rootå¯†ç¢¼å¾Œä¾†å·²ç¶“æ”¹æˆæˆ‘å¸¸ç”¨çš„é•·å¯†ç¢¼äº†

å…ˆæŠŠè¦–çª—æ‹‰å¤§ä¸€é»
å‰é¢è¨­å®šæ é
æ•™å­¸æŒ‰å³ä¸Šè§’X
ç„¶å¾Œé»å³ä¸Šè§’é›»æºæŒ‰éˆ• => æ‰³æ‰‹åœ–æ¡ˆ

-   è¨­å®š:
    -   æ¡Œé¢ => å³éµ => é¡¯ç¤ºå™¨è¨­å®šå€¼ => å…ˆæŠŠè¦–çª—æ‹‰å·¦é‚Šä¸€é» => è§£æåº¦èª¿æˆ 1152x864 => å³ä¸Šè§’å¥—ç”¨
    -   éš±ç§ => è¢å¹•é–å®š => é—œé–‰

## çµ‚ç«¯æ©Ÿ

æ¦‚è¦½ => çµ‚ç«¯æ©Ÿ

è‡ªå·±æŠŠè¦–çª—æ‹‰åˆ°æœ€ä¸Šé¢å°±å¯ä»¥è®Šæˆå…¨è¢å¹•

çµ‚ç«¯æ©Ÿçš„è¨­å®šå¯ä»¥è‡ªå·±æ”¹ä¸€ä¸‹, å­—å‹å¤§å°ç”šéº¼çš„

### çµ‚ç«¯æ©Ÿå¿«é€Ÿéµ

-   æ–°å¢åˆ†é :
    -   å·¦ä¸Šè§’æª”æ¡ˆ => æ–°åˆ†é 
    -   æˆ–æ˜¯ `Ctrl + Shift + T`
-   åˆ‡æ›åˆ†é :
    -   Ctrl + PageUp ä¸Šä¸€å€‹åˆ†é 
    -   Ctrl + PageDown ä¸‹ä¸€å€‹åˆ†é 
-   PageUp:
    -   Shift + PageUp
-   PageDown:
    -   Shift + PageDown
-   LineUp:
    -   Ctrl + Shift + UpArrow
-   LineDown:
    -   Ctrl + Shift + DownArrow

## VirtualBox å¿«ç…§

æ”¹è¨­å®šå‰å¾Œéƒ½è¦å»ºç«‹å¿«ç…§å‚™ä»½

VirtualBox ç®¡ç†å“¡
å·¦é‚Šçš„è™›æ“¬æ©Ÿå™¨ => å³é‚Šçš„å°æŒ‰éˆ• => å¿«ç…§
ä¹‹å¾Œåœ¨å³é‚Šçš„è¦–çª—å¯ä»¥çœ‹åˆ°ä¹‹å‰å»ºç«‹çš„æ‰€æœ‰å¿«ç…§
ä¸Šé¢æœ‰ "æˆªå–" çš„æŒ‰éˆ•å¯ä»¥å»ºç«‹å¿«ç…§
ä¸éç³»çµ±è¦é—œæ©Ÿæ‰èƒ½é‚„åŸå¿«ç…§è¼‰

## ç³»çµ±å…¥é–€åŸºæœ¬æ“ä½œ

### Shell

è®“ä½¿ç”¨è€…é€éè¢å¹•éµç›¤èˆ‡ä½œæ¥­ç³»çµ±çš„æ ¸å¿ƒæºé€š
è§£æä½¿ç”¨è€…è¼¸å…¥çš„æŒ‡ä»¤ï¼Œæ‰€ä»¥ç¨±ç‚ºå‘½ä»¤è§£æå™¨(Command Interpreter)

-   Shell åˆ†ç‚º:
    -   Command-line Interface Shell
        -   SH: ç¬¬ä¸€å€‹ Unix Shell, Stephen Bourne å¯«çš„
        -   BASH: GNU è¨ˆåŠƒç™¼å±•è€Œä¾†, æœ€å¤šäººä½¿ç”¨, (Bourne-Again SHell)
        -   CSH: BSD Unix ä½¿ç”¨çš„ SHELL, Bill Joy å¯«çš„
    -   Graphic Interface Shell
        -   KDE
        -   GNOME

æ•´å€‹æµç¨‹æ˜¯:

user è¼¸å…¥æŒ‡ä»¤ => Shell è§£ææŒ‡ä»¤ç¿»è­¯çµ¦Kernel  
 => Kernelä¾ç…§æŒ‡ä»¤æ§åˆ¶device => device  
 => å›æ‡‰çµ¦ Kernel => Shell ç¿»è­¯ => user ä½¿ç”¨è€…æ”¶åˆ°å›æ‡‰

è¼¸å…¥çš„æŒ‡ä»¤ shell ä¸€å®šè¦èªè­˜æ‰æœ‰ç”¨

### Vitrual Console

Linuxæ˜¯å¤šäººå¤šå·¥çš„ä½œæ¥­ç³»çµ±
é è¨­æä¾›4å€‹CLIè·Ÿ2å€‹GUI

-   GUI:
    `Ctrl + Alt + F1~F2`: tty1~2
    æˆ‘å€‘å‰›å‰›é–‹çš„çµ‚ç«¯æ©Ÿå…¶å¯¦æ˜¯åœ¨ GUI ç•Œé¢é–‹çš„
    ä¸éå¾ CLI åˆ‡å› GUI, è§£æåº¦æœƒè·³æ‰, å› ç‚ºé€™æ˜¯ç”¨ VirtualBoxçš„é—œä¿‚, æ²’è¾¦æ³•, é‡é–‹æ©Ÿåˆæœƒå¾©åŸ
-   CLI:
    `Ctrl + Alt + F3~F6`: tty3~6

### ä¸‹æŒ‡ä»¤çš„åŸºæœ¬èªæ³•

```sh
# é¡¯ç¤ºç•¶å‰å·¥ä½œç›®éŒ„çš„å®Œæ•´è·¯å¾‘: print working directory
pwd

# æ¸…é™¤ç›®å‰ç·©è¡å€
clear

# é¡¯ç¤ºæ™‚é–“
date

# é¡¯ç¤ºæ—¥æ›†
cal

# é¡¯ç¤º 2024 å¹´çš„å¹´æ›†
cal 2024

# å«å‡ºè¨ˆç®—æ©Ÿ
bc

# å«å‡º bc çš„å…¨éƒ¨ä½¿ç”¨èªªæ˜
man bc

# å«å‡º bc çš„ä½¿ç”¨èªªæ˜(åˆ†é )
info bc

# æ–°å¢ä½¿ç”¨è€…tina
useradd tina

# å¹«tinaè¨­å®šå¯†ç¢¼
passwd tina

# å¹«ç®¡ç†è€…è¨­å®šå¯†ç¢¼
passwd

# åˆ‡æ›ä½¿ç”¨è€…, ä¹‹å¾Œè¦è¼¸å…¥å¯†ç¢¼
su hydra

# åˆ‡åˆ°ç®¡ç†å“¡, ä¹‹å¾Œè¦è¼¸å…¥å¯†ç¢¼
su -

```

å–„ç”¨ Tab éµè£œé½ŠæŒ‡ä»¤èˆ‡è·¯å¾‘
å¦‚æœè·¯å¾‘æœ‰å¯«éŒ¯, ä»–æœƒè£œä¸å‡ºä¾†

å¦‚æœä½ è¼¸å…¥æª”åçš„å‰ç¶´å­—, ç„¶å¾ŒæŒ‰Tabè£œå­—
å¦‚æœæœ‰å¤šå€‹æª”åå‰ç¶´é¡ä¼¼, ç¬¬1æ¬¡ä»–æœƒé¡¯ç¤ºä¸å‡ºä¾†, ç¬¬2æ¬¡ä»–æœƒæŠŠå‰ç¶´ç›¸åŒçš„æª”åèˆ‡è·¯å¾‘éƒ½åˆ—å‡ºä¾†
ä»¤:

`Ctrl + C`: ä¸­æ–·å‰æ™¯åŸ·è¡Œæ¨¡å¼, æ¯”å¦‚èªª ping æŒ‡ä»¤
`Ctrl + D`: ä¸­æ–·è¼¸å…¥, ç­‰æ–¼ç™»å‡º

å¦‚æœåœ¨ GUI ç•Œé¢å»çœ‹ man page æŸ¥è©¢æŒ‡ä»¤ç”¨æ³•èªªæ˜
æœƒæŒ‰ç…§ç•¶åˆå®‰è£ä½œæ¥­ç³»çµ±çš„èªç³»
æœ€å¥½çœ‹è‹±æ–‡åŸæ–‡çš„æ¯”è¼ƒæº–
å¯ä»¥æ”¹æˆè‹±æ–‡

å¦‚æœæŸ¥è©¢mançš„æ™‚å€™, æœ‰ä¸åŒåˆ†é¡, ç›¸åŒåç¨±çš„æŒ‡ä»¤/æª”æ¡ˆ
å¯ä»¥åœ¨ man å¾Œé¢åŠ ä¸Šæ•¸å­—å»æŒ‡å®šè¦çœ‹çš„åˆ†é¡
æ¯”å¦‚èªª
`man passwd` æœƒé¡¯ç¤º`passwd`æŒ‡ä»¤çš„èªªæ˜
`man 5 passwd` å¯ä»¥æŸ¥çœ‹`passwd`æª”æ¡ˆçš„èªªæ˜

> `command [option] [argument]`

command æŒ‡ä»¤
option åƒæ•¸:  
 `-`: çŸ­åƒæ•¸(ç°¡å¯«)  
 `--`: é•·åƒæ•¸(å…¨å)  
Argument å¼•æ•¸

man page è£¡é¢çš„ SYNOPSIS  
å…¶ä¸­çš„ option è·Ÿ argument,  
åªè¦æœ‰`[]`æ‹¬å¼§åŒ…èµ·ä¾†çš„å°±ä¸ä¸€å®šè¦è¼¸å…¥

## ç™»å‡ºèˆ‡é—œæ©Ÿ

```sh
# ç™»å‡º
exit
# æˆ– logout, ä½†æ˜¯ GUI ä¸æ˜¯ login shell, ä¸èƒ½ç”¨ logout, CLI æ‰èƒ½ç”¨
logout
# æˆ– Ctrl + D

# é—œæ©Ÿ
# é€šå¸¸ç”¨é€™å€‹, 10 åˆ†é˜å¾Œé—œæ©Ÿ, ä¸¦ä¸”æ‰€æœ‰é€£ç·šä¸­çš„ä½¿ç”¨è€…éƒ½æœƒæ”¶åˆ°é€šçŸ¥
shutdown -h +10
# å–æ¶ˆå‰›å‰›ä¸‹çš„é—œæ©ŸæŒ‡ä»¤
shutdown -c
# ç¾åœ¨é¦¬ä¸Šé—œæ©Ÿ
init 0
shutdown -h now
poweroff
halt
systemctl poweroff
systemctl helt

# é‡æ–°é–‹æ©Ÿ
# 10 åˆ†é˜å¾Œé‡æ–°é–‹æ©Ÿ
shutdown -r +10
# ç¾åœ¨é¦¬ä¸Šé‡æ–°é–‹æ©Ÿ
shutdown -r now
init 6
reboot
systemctl reboot
```

## æ”¹èªç³»

`/etc/locale.conf`

é è¨­æ˜¯é€™æ¨£çš„åœ°æ–¹

```sh
LANG="zh_TW.UTF-8"
```

æ”¹æˆ

```sh
# LANG="zh_TW.UTF-8"
LANG="en_US.UTF-8"
```

åƒè¬å°å¿ƒ, ä¸è¦æ”¹éŒ¯, å¦å‰‡æœ‰æ™‚å€™ç³»çµ±æœƒæ›æ‰
ä¹‹å¾Œä¸‹é€™å€‹æŒ‡ä»¤, åœ¨ cli ç•Œé¢å°±èƒ½é¦¬ä¸Šæ”¹æˆè‹±æ–‡

```sh
source /etc/locale.conf
```

ä¸éGUIç•Œé¢éœ€è¦é‡é–‹æ©Ÿæ‰æœƒæ”¹æˆæ•´å€‹ç³»çµ±éƒ½æ˜¯è‹±æ–‡

## prevent non-root users's shutdown or reboot commands in Linux

To prevent non-root users from issuing shutdown or reboot commands in Linux, you have a few options:

1. **PolicyKit Rules**:

    - **ConsoleKit** manages shutdown functions, and **PolicyKit** handles these actions. You can adjust the policies by creating a rule file. Here's how:

        - Edit the file `/etc/polkit-1/rules.d/20-disallow-shutdown.rules`.
        - Add the following rule to disallow shutdown and restart for users in the "users" group:
            ```sh
            polkit.addRule(function(action, subject) {
                if ((action.id == "org.freedesktop.consolekit.system.stop" || action.id == "org.freedesktop.consolekit.system.restart") && subject.isInGroup("users")) {
                    return subject.active ? polkit.Result.AUTH_ADMIN : polkit.Result.NO;
                }
            });
            ```

    - Alternatively, you can modify the file `/etc/polkit-1/localauthority/50-local.d/20-disallow-shutdown.pkla` with the following content:
        ```
        [Disallow shutdown]
        Identity=unix-group:users
        Action=org.freedesktop.consolekit.system.stop;org.freedesktop.consolekit.system.restart
        ResultAny=no
        ResultInactive=no
        ResultActive=auth_admin
        ```

2. **File Permissions**:

    - Remove the executable permission for shutdown and reboot commands for all users except the root user:
        ```sh
        sudo chmod o-x /sbin/shutdown
        sudo chmod o-x /sbin/reboot
        sudo chmod o-x /sbin/halt
        sudo chmod o-x /sbin/poweroff
        ```

3. **Systemd and Logind**:
    - If you're using **systemd**, you can create a rule to control shutdown actions:
        - Monitor system messages with `journalctl -f`.
        - Create the file `/etc/polkit-1/rules.d/60-noreboot_norestart.rules` (in JavaScript).
        - Add logic to allow users in the "power" group or require superuser authorization for specific actions (e.g., reboot):
            ```sh
            const power_actions = [
                'org.freedesktop.login1.reboot',
                'org.freedesktop.login1.reboot-multiple-sessions',
                // Add other actions as needed
            ];
            ```

Remember that these methods help restrict shutdown and reboot commands, but physical access to the server (such as pulling the plug) is still a consideration. Choose the approach that best fits your system's requirements! ğŸš€ğŸ”’

For more details, you can refer to the Super User discussion [here](https://superuser.com/questions/354678/what-is-the-correct-way-to-prevent-non-root-users-from-issuing-shutdowns-or-rebo) and the Fedingo guide [here](https://fedingo.com/how-to-disable-shutdown-reboot-commands-in-linux/).Â¹Â²

ä¾†æº: èˆ‡ Bing çš„äº¤è«‡ï¼Œ 2024/3/18
(1) [linux - What is the correct way to prevent non-root users from issuing shutdowns or reboots - Super User.](https://superuser.com/questions/354678/what-is-the-correct-way-to-prevent-non-root-users-from-issuing-shutdowns-or-rebo.)
(2) [How to Disable Shutdown & Reboot Commands in Linux - Fedingo.](https://fedingo.com/how-to-disable-shutdown-reboot-commands-in-linux/.)
(3) [Linux shutdown permission - Super User.](https://superuser.com/questions/666687/linux-shutdown-permission.)
(4) [How to prevent poweroff / shutdown / reboot / suspend / hibernate by non-root users in Ubuntu Xenial 16.04?.](https://askubuntu.com/questions/989523/how-to-prevent-poweroff-shutdown-reboot-suspend-hibernate-by-non-root-us.)
